import{az as yt,r as F,d as wt,o as vt,b as Ct,E as L,a as Et,q as j,p as Q,l as T,B as V,F as O,j as z,w as H,aA as At,m as Bt,n as te,s as St,aB as Tt,i as x,aC as Nt,c as Rt}from"./index-CZU4bJ5v.js";/* empty css                    *//* empty css                  *//* empty css                        *//* empty css                 */import{P as Z,q as De,b as qe,d as ke,e as It}from"./pay-D8J2j7Ih.js";/* empty css                       *//* empty css                 *//* empty css                   */import{_ as Pt}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _t="/wechat-icon.png",Mt="/alipay-icon.png";var G={},ue,Ue;function bt(){return Ue||(Ue=1,ue=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),ue}var le={},J={},Fe;function K(){if(Fe)return J;Fe=1;let i;const r=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return J.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17},J.getSymbolTotalCodewords=function(t){return r[t]},J.getBCHDigit=function(o){let t=0;for(;o!==0;)t++,o>>>=1;return t},J.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');i=t},J.isKanjiModeEnabled=function(){return typeof i<"u"},J.toSJIS=function(t){return i(t)},J}var ce={},Ve;function Me(){return Ve||(Ve=1,function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+o)}}i.isValid=function(t){return t&&typeof t.bit<"u"&&t.bit>=0&&t.bit<4},i.from=function(t,e){if(i.isValid(t))return t;try{return r(t)}catch{return e}}}(ce)),ce}var de,ze;function Lt(){if(ze)return de;ze=1;function i(){this.buffer=[],this.length=0}return i.prototype={get:function(r){const o=Math.floor(r/8);return(this.buffer[o]>>>7-r%8&1)===1},put:function(r,o){for(let t=0;t<o;t++)this.putBit((r>>>o-t-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),r&&(this.buffer[o]|=128>>>this.length%8),this.length++}},de=i,de}var fe,He;function Dt(){if(He)return fe;He=1;function i(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}return i.prototype.set=function(r,o,t,e){const n=r*this.size+o;this.data[n]=t,e&&(this.reservedBit[n]=!0)},i.prototype.get=function(r,o){return this.data[r*this.size+o]},i.prototype.xor=function(r,o,t){this.data[r*this.size+o]^=t},i.prototype.isReserved=function(r,o){return this.reservedBit[r*this.size+o]},fe=i,fe}var ge={},Je;function qt(){return Je||(Je=1,function(i){const r=K().getSymbolSize;i.getRowColCoords=function(t){if(t===1)return[];const e=Math.floor(t/7)+2,n=r(t),a=n===145?26:Math.ceil((n-13)/(2*e-2))*2,s=[n-7];for(let l=1;l<e-1;l++)s[l]=s[l-1]-a;return s.push(6),s.reverse()},i.getPositions=function(t){const e=[],n=i.getRowColCoords(t),a=n.length;for(let s=0;s<a;s++)for(let l=0;l<a;l++)s===0&&l===0||s===0&&l===a-1||s===a-1&&l===0||e.push([n[s],n[l]]);return e}}(ge)),ge}var he={},Oe;function kt(){if(Oe)return he;Oe=1;const i=K().getSymbolSize,r=7;return he.getPositions=function(t){const e=i(t);return[[0,0],[e-r,0],[0,e-r]]},he}var me={},Ke;function Ut(){return Ke||(Ke=1,function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const r={N1:3,N2:3,N3:40,N4:10};i.isValid=function(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7},i.from=function(e){return i.isValid(e)?parseInt(e,10):void 0},i.getPenaltyN1=function(e){const n=e.size;let a=0,s=0,l=0,f=null,m=null;for(let E=0;E<n;E++){s=l=0,f=m=null;for(let g=0;g<n;g++){let h=e.get(E,g);h===f?s++:(s>=5&&(a+=r.N1+(s-5)),f=h,s=1),h=e.get(g,E),h===m?l++:(l>=5&&(a+=r.N1+(l-5)),m=h,l=1)}s>=5&&(a+=r.N1+(s-5)),l>=5&&(a+=r.N1+(l-5))}return a},i.getPenaltyN2=function(e){const n=e.size;let a=0;for(let s=0;s<n-1;s++)for(let l=0;l<n-1;l++){const f=e.get(s,l)+e.get(s,l+1)+e.get(s+1,l)+e.get(s+1,l+1);(f===4||f===0)&&a++}return a*r.N2},i.getPenaltyN3=function(e){const n=e.size;let a=0,s=0,l=0;for(let f=0;f<n;f++){s=l=0;for(let m=0;m<n;m++)s=s<<1&2047|e.get(f,m),m>=10&&(s===1488||s===93)&&a++,l=l<<1&2047|e.get(m,f),m>=10&&(l===1488||l===93)&&a++}return a*r.N3},i.getPenaltyN4=function(e){let n=0;const a=e.data.length;for(let l=0;l<a;l++)n+=e.data[l];return Math.abs(Math.ceil(n*100/a/5)-10)*r.N4};function o(t,e,n){switch(t){case i.Patterns.PATTERN000:return(e+n)%2===0;case i.Patterns.PATTERN001:return e%2===0;case i.Patterns.PATTERN010:return n%3===0;case i.Patterns.PATTERN011:return(e+n)%3===0;case i.Patterns.PATTERN100:return(Math.floor(e/2)+Math.floor(n/3))%2===0;case i.Patterns.PATTERN101:return e*n%2+e*n%3===0;case i.Patterns.PATTERN110:return(e*n%2+e*n%3)%2===0;case i.Patterns.PATTERN111:return(e*n%3+(e+n)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}i.applyMask=function(e,n){const a=n.size;for(let s=0;s<a;s++)for(let l=0;l<a;l++)n.isReserved(l,s)||n.xor(l,s,o(e,l,s))},i.getBestMask=function(e,n){const a=Object.keys(i.Patterns).length;let s=0,l=1/0;for(let f=0;f<a;f++){n(f),i.applyMask(f,e);const m=i.getPenaltyN1(e)+i.getPenaltyN2(e)+i.getPenaltyN3(e)+i.getPenaltyN4(e);i.applyMask(f,e),m<l&&(l=m,s=f)}return s}}(me)),me}var ne={},Ye;function dt(){if(Ye)return ne;Ye=1;const i=Me(),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ne.getBlocksCount=function(e,n){switch(n){case i.L:return r[(e-1)*4+0];case i.M:return r[(e-1)*4+1];case i.Q:return r[(e-1)*4+2];case i.H:return r[(e-1)*4+3];default:return}},ne.getTotalCodewordsCount=function(e,n){switch(n){case i.L:return o[(e-1)*4+0];case i.M:return o[(e-1)*4+1];case i.Q:return o[(e-1)*4+2];case i.H:return o[(e-1)*4+3];default:return}},ne}var pe={},X={},$e;function Ft(){if($e)return X;$e=1;const i=new Uint8Array(512),r=new Uint8Array(256);return function(){let t=1;for(let e=0;e<255;e++)i[e]=t,r[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),X.log=function(t){if(t<1)throw new Error("log("+t+")");return r[t]},X.exp=function(t){return i[t]},X.mul=function(t,e){return t===0||e===0?0:i[r[t]+r[e]]},X}var je;function Vt(){return je||(je=1,function(i){const r=Ft();i.mul=function(t,e){const n=new Uint8Array(t.length+e.length-1);for(let a=0;a<t.length;a++)for(let s=0;s<e.length;s++)n[a+s]^=r.mul(t[a],e[s]);return n},i.mod=function(t,e){let n=new Uint8Array(t);for(;n.length-e.length>=0;){const a=n[0];for(let l=0;l<e.length;l++)n[l]^=r.mul(e[l],a);let s=0;for(;s<n.length&&n[s]===0;)s++;n=n.slice(s)}return n},i.generateECPolynomial=function(t){let e=new Uint8Array([1]);for(let n=0;n<t;n++)e=i.mul(e,new Uint8Array([1,r.exp(n)]));return e}}(pe)),pe}var ye,Qe;function zt(){if(Qe)return ye;Qe=1;const i=Vt();function r(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return r.prototype.initialize=function(t){this.degree=t,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=i.mod(e,this.genPoly),a=this.degree-n.length;if(a>0){const s=new Uint8Array(this.degree);return s.set(n,a),s}return n},ye=r,ye}var we={},ve={},Ce={},xe;function ft(){return xe||(xe=1,Ce.isValid=function(r){return!isNaN(r)&&r>=1&&r<=40}),Ce}var q={},Ge;function gt(){if(Ge)return q;Ge=1;const i="[0-9]+",r="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;q.KANJI=new RegExp(o,"g"),q.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),q.BYTE=new RegExp(t,"g"),q.NUMERIC=new RegExp(i,"g"),q.ALPHANUMERIC=new RegExp(r,"g");const e=new RegExp("^"+o+"$"),n=new RegExp("^"+i+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return q.testKanji=function(l){return e.test(l)},q.testNumeric=function(l){return n.test(l)},q.testAlphanumeric=function(l){return a.test(l)},q}var We;function Y(){return We||(We=1,function(i){const r=ft(),o=gt();i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(n,a){if(!n.ccBits)throw new Error("Invalid mode: "+n);if(!r.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?n.ccBits[0]:a<27?n.ccBits[1]:n.ccBits[2]},i.getBestModeForData=function(n){return o.testNumeric(n)?i.NUMERIC:o.testAlphanumeric(n)?i.ALPHANUMERIC:o.testKanji(n)?i.KANJI:i.BYTE},i.toString=function(n){if(n&&n.id)return n.id;throw new Error("Invalid mode")},i.isValid=function(n){return n&&n.bit&&n.ccBits};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+e)}}i.from=function(n,a){if(i.isValid(n))return n;try{return t(n)}catch{return a}}}(ve)),ve}var Ze;function Ht(){return Ze||(Ze=1,function(i){const r=K(),o=dt(),t=Me(),e=Y(),n=ft(),a=7973,s=r.getBCHDigit(a);function l(g,h,R){for(let I=1;I<=40;I++)if(h<=i.getCapacity(I,R,g))return I}function f(g,h){return e.getCharCountIndicator(g,h)+4}function m(g,h){let R=0;return g.forEach(function(I){const _=f(I.mode,h);R+=_+I.getBitsLength()}),R}function E(g,h){for(let R=1;R<=40;R++)if(m(g,R)<=i.getCapacity(R,h,e.MIXED))return R}i.from=function(h,R){return n.isValid(h)?parseInt(h,10):R},i.getCapacity=function(h,R,I){if(!n.isValid(h))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=e.BYTE);const _=r.getSymbolTotalCodewords(h),A=o.getTotalCodewordsCount(h,R),P=(_-A)*8;if(I===e.MIXED)return P;const N=P-f(I,h);switch(I){case e.NUMERIC:return Math.floor(N/10*3);case e.ALPHANUMERIC:return Math.floor(N/11*2);case e.KANJI:return Math.floor(N/13);case e.BYTE:default:return Math.floor(N/8)}},i.getBestVersionForData=function(h,R){let I;const _=t.from(R,t.M);if(Array.isArray(h)){if(h.length>1)return E(h,_);if(h.length===0)return 1;I=h[0]}else I=h;return l(I.mode,I.getLength(),_)},i.getEncodedBits=function(h){if(!n.isValid(h)||h<7)throw new Error("Invalid QR Code version");let R=h<<12;for(;r.getBCHDigit(R)-s>=0;)R^=a<<r.getBCHDigit(R)-s;return h<<12|R}}(we)),we}var Ee={},Xe;function Jt(){if(Xe)return Ee;Xe=1;const i=K(),r=1335,o=21522,t=i.getBCHDigit(r);return Ee.getEncodedBits=function(n,a){const s=n.bit<<3|a;let l=s<<10;for(;i.getBCHDigit(l)-t>=0;)l^=r<<i.getBCHDigit(l)-t;return(s<<10|l)^o},Ee}var Ae={},Be,et;function Ot(){if(et)return Be;et=1;const i=Y();function r(o){this.mode=i.NUMERIC,this.data=o.toString()}return r.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let e,n,a;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),a=parseInt(n,10),t.put(a,10);const s=this.data.length-e;s>0&&(n=this.data.substr(e),a=parseInt(n,10),t.put(a,s*3+1))},Be=r,Be}var Se,tt;function Kt(){if(tt)return Se;tt=1;const i=Y(),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(t){this.mode=i.ALPHANUMERIC,this.data=t}return o.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let a=r.indexOf(this.data[n])*45;a+=r.indexOf(this.data[n+1]),e.put(a,11)}this.data.length%2&&e.put(r.indexOf(this.data[n]),6)},Se=o,Se}var Te,nt;function Yt(){if(nt)return Te;nt=1;const i=Y();function r(o){this.mode=i.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return r.getBitsLength=function(t){return t*8},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(o){for(let t=0,e=this.data.length;t<e;t++)o.put(this.data[t],8)},Te=r,Te}var Ne,rt;function $t(){if(rt)return Ne;rt=1;const i=Y(),r=K();function o(t){this.mode=i.KANJI,this.data=t}return o.getBitsLength=function(e){return e*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=r.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}},Ne=o,Ne}var Re={exports:{}},ot;function jt(){return ot||(ot=1,function(i){var r={single_source_shortest_paths:function(o,t,e){var n={},a={};a[t]=0;var s=r.PriorityQueue.make();s.push(t,0);for(var l,f,m,E,g,h,R,I,_;!s.empty();){l=s.pop(),f=l.value,E=l.cost,g=o[f]||{};for(m in g)g.hasOwnProperty(m)&&(h=g[m],R=E+h,I=a[m],_=typeof a[m]>"u",(_||I>R)&&(a[m]=R,s.push(m,R),n[m]=f))}if(typeof e<"u"&&typeof a[e]>"u"){var A=["Could not find a path from ",t," to ",e,"."].join("");throw new Error(A)}return n},extract_shortest_path_from_predecessor_list:function(o,t){for(var e=[],n=t;n;)e.push(n),o[n],n=o[n];return e.reverse(),e},find_path:function(o,t,e){var n=r.single_source_shortest_paths(o,t,e);return r.extract_shortest_path_from_predecessor_list(n,e)},PriorityQueue:{make:function(o){var t=r.PriorityQueue,e={},n;o=o||{};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e.queue=[],e.sorter=o.sorter||t.default_sorter,e},default_sorter:function(o,t){return o.cost-t.cost},push:function(o,t){var e={value:o,cost:t};this.queue.push(e),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=r}(Re)),Re.exports}var it;function Qt(){return it||(it=1,function(i){const r=Y(),o=Ot(),t=Kt(),e=Yt(),n=$t(),a=gt(),s=K(),l=jt();function f(A){return unescape(encodeURIComponent(A)).length}function m(A,P,N){const B=[];let M;for(;(M=A.exec(N))!==null;)B.push({data:M[0],index:M.index,mode:P,length:M[0].length});return B}function E(A){const P=m(a.NUMERIC,r.NUMERIC,A),N=m(a.ALPHANUMERIC,r.ALPHANUMERIC,A);let B,M;return s.isKanjiModeEnabled()?(B=m(a.BYTE,r.BYTE,A),M=m(a.KANJI,r.KANJI,A)):(B=m(a.BYTE_KANJI,r.BYTE,A),M=[]),P.concat(N,B,M).sort(function(C,v){return C.index-v.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function g(A,P){switch(P){case r.NUMERIC:return o.getBitsLength(A);case r.ALPHANUMERIC:return t.getBitsLength(A);case r.KANJI:return n.getBitsLength(A);case r.BYTE:return e.getBitsLength(A)}}function h(A){return A.reduce(function(P,N){const B=P.length-1>=0?P[P.length-1]:null;return B&&B.mode===N.mode?(P[P.length-1].data+=N.data,P):(P.push(N),P)},[])}function R(A){const P=[];for(let N=0;N<A.length;N++){const B=A[N];switch(B.mode){case r.NUMERIC:P.push([B,{data:B.data,mode:r.ALPHANUMERIC,length:B.length},{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.ALPHANUMERIC:P.push([B,{data:B.data,mode:r.BYTE,length:B.length}]);break;case r.KANJI:P.push([B,{data:B.data,mode:r.BYTE,length:f(B.data)}]);break;case r.BYTE:P.push([{data:B.data,mode:r.BYTE,length:f(B.data)}])}}return P}function I(A,P){const N={},B={start:{}};let M=["start"];for(let y=0;y<A.length;y++){const C=A[y],v=[];for(let p=0;p<C.length;p++){const S=C[p],c=""+y+p;v.push(c),N[c]={node:S,lastCount:0},B[c]={};for(let u=0;u<M.length;u++){const d=M[u];N[d]&&N[d].node.mode===S.mode?(B[d][c]=g(N[d].lastCount+S.length,S.mode)-g(N[d].lastCount,S.mode),N[d].lastCount+=S.length):(N[d]&&(N[d].lastCount=S.length),B[d][c]=g(S.length,S.mode)+4+r.getCharCountIndicator(S.mode,P))}}M=v}for(let y=0;y<M.length;y++)B[M[y]].end=0;return{map:B,table:N}}function _(A,P){let N;const B=r.getBestModeForData(A);if(N=r.from(P,B),N!==r.BYTE&&N.bit<B.bit)throw new Error('"'+A+'" cannot be encoded with mode '+r.toString(N)+`.
 Suggested mode is: `+r.toString(B));switch(N===r.KANJI&&!s.isKanjiModeEnabled()&&(N=r.BYTE),N){case r.NUMERIC:return new o(A);case r.ALPHANUMERIC:return new t(A);case r.KANJI:return new n(A);case r.BYTE:return new e(A)}}i.fromArray=function(P){return P.reduce(function(N,B){return typeof B=="string"?N.push(_(B,null)):B.data&&N.push(_(B.data,B.mode)),N},[])},i.fromString=function(P,N){const B=E(P,s.isKanjiModeEnabled()),M=R(B),y=I(M,N),C=l.find_path(y.map,"start","end"),v=[];for(let p=1;p<C.length-1;p++)v.push(y.table[C[p]].node);return i.fromArray(h(v))},i.rawSplit=function(P){return i.fromArray(E(P,s.isKanjiModeEnabled()))}}(Ae)),Ae}var at;function xt(){if(at)return le;at=1;const i=K(),r=Me(),o=Lt(),t=Dt(),e=qt(),n=kt(),a=Ut(),s=dt(),l=zt(),f=Ht(),m=Jt(),E=Y(),g=Qt();function h(y,C){const v=y.size,p=n.getPositions(C);for(let S=0;S<p.length;S++){const c=p[S][0],u=p[S][1];for(let d=-1;d<=7;d++)if(!(c+d<=-1||v<=c+d))for(let w=-1;w<=7;w++)u+w<=-1||v<=u+w||(d>=0&&d<=6&&(w===0||w===6)||w>=0&&w<=6&&(d===0||d===6)||d>=2&&d<=4&&w>=2&&w<=4?y.set(c+d,u+w,!0,!0):y.set(c+d,u+w,!1,!0))}}function R(y){const C=y.size;for(let v=8;v<C-8;v++){const p=v%2===0;y.set(v,6,p,!0),y.set(6,v,p,!0)}}function I(y,C){const v=e.getPositions(C);for(let p=0;p<v.length;p++){const S=v[p][0],c=v[p][1];for(let u=-2;u<=2;u++)for(let d=-2;d<=2;d++)u===-2||u===2||d===-2||d===2||u===0&&d===0?y.set(S+u,c+d,!0,!0):y.set(S+u,c+d,!1,!0)}}function _(y,C){const v=y.size,p=f.getEncodedBits(C);let S,c,u;for(let d=0;d<18;d++)S=Math.floor(d/3),c=d%3+v-8-3,u=(p>>d&1)===1,y.set(S,c,u,!0),y.set(c,S,u,!0)}function A(y,C,v){const p=y.size,S=m.getEncodedBits(C,v);let c,u;for(c=0;c<15;c++)u=(S>>c&1)===1,c<6?y.set(c,8,u,!0):c<8?y.set(c+1,8,u,!0):y.set(p-15+c,8,u,!0),c<8?y.set(8,p-c-1,u,!0):c<9?y.set(8,15-c-1+1,u,!0):y.set(8,15-c-1,u,!0);y.set(p-8,8,1,!0)}function P(y,C){const v=y.size;let p=-1,S=v-1,c=7,u=0;for(let d=v-1;d>0;d-=2)for(d===6&&d--;;){for(let w=0;w<2;w++)if(!y.isReserved(S,d-w)){let b=!1;u<C.length&&(b=(C[u]>>>c&1)===1),y.set(S,d-w,b),c--,c===-1&&(u++,c=7)}if(S+=p,S<0||v<=S){S-=p,p=-p;break}}}function N(y,C,v){const p=new o;v.forEach(function(w){p.put(w.mode.bit,4),p.put(w.getLength(),E.getCharCountIndicator(w.mode,y)),w.write(p)});const S=i.getSymbolTotalCodewords(y),c=s.getTotalCodewordsCount(y,C),u=(S-c)*8;for(p.getLengthInBits()+4<=u&&p.put(0,4);p.getLengthInBits()%8!==0;)p.putBit(0);const d=(u-p.getLengthInBits())/8;for(let w=0;w<d;w++)p.put(w%2?17:236,8);return B(p,y,C)}function B(y,C,v){const p=i.getSymbolTotalCodewords(C),S=s.getTotalCodewordsCount(C,v),c=p-S,u=s.getBlocksCount(C,v),d=p%u,w=u-d,b=Math.floor(p/u),D=Math.floor(c/u),re=D+1,W=b-D,mt=new l(W);let oe=0;const ee=new Array(u),be=new Array(u);let ie=0;const pt=new Uint8Array(y.buffer);for(let $=0;$<u;$++){const se=$<w?D:re;ee[$]=pt.slice(oe,oe+se),be[$]=mt.encode(ee[$]),oe+=se,ie=Math.max(ie,se)}const ae=new Uint8Array(p);let Le=0,k,U;for(k=0;k<ie;k++)for(U=0;U<u;U++)k<ee[U].length&&(ae[Le++]=ee[U][k]);for(k=0;k<W;k++)for(U=0;U<u;U++)ae[Le++]=be[U][k];return ae}function M(y,C,v,p){let S;if(Array.isArray(y))S=g.fromArray(y);else if(typeof y=="string"){let b=C;if(!b){const D=g.rawSplit(y);b=f.getBestVersionForData(D,v)}S=g.fromString(y,b||40)}else throw new Error("Invalid data");const c=f.getBestVersionForData(S,v);if(!c)throw new Error("The amount of data is too big to be stored in a QR Code");if(!C)C=c;else if(C<c)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+c+`.
`);const u=N(C,v,S),d=i.getSymbolSize(C),w=new t(d);return h(w,C),R(w),I(w,C),A(w,v,0),C>=7&&_(w,C),P(w,u),isNaN(p)&&(p=a.getBestMask(w,A.bind(null,w,v))),a.applyMask(p,w),A(w,v,p),{modules:w,version:C,errorCorrectionLevel:v,maskPattern:p,segments:S}}return le.create=function(C,v){if(typeof C>"u"||C==="")throw new Error("No input text");let p=r.M,S,c;return typeof v<"u"&&(p=r.from(v.errorCorrectionLevel,r.M),S=f.from(v.version),c=a.from(v.maskPattern),v.toSJISFunc&&i.setToSJISFunction(v.toSJISFunc)),M(C,S,p,c)},le}var Ie={},Pe={},st;function ht(){return st||(st=1,function(i){function r(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let t=o.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+o);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(n){return[n,n]}))),t.length===6&&t.push("F","F");const e=parseInt(t.join(""),16);return{r:e>>24&255,g:e>>16&255,b:e>>8&255,a:e&255,hex:"#"+t.slice(0,6).join("")}}i.getOptions=function(t){t||(t={}),t.color||(t.color={});const e=typeof t.margin>"u"||t.margin===null||t.margin<0?4:t.margin,n=t.width&&t.width>=21?t.width:void 0,a=t.scale||4;return{width:n,scale:n?4:a,margin:e,color:{dark:r(t.color.dark||"#000000ff"),light:r(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},i.getScale=function(t,e){return e.width&&e.width>=t+e.margin*2?e.width/(t+e.margin*2):e.scale},i.getImageWidth=function(t,e){const n=i.getScale(t,e);return Math.floor((t+e.margin*2)*n)},i.qrToImageData=function(t,e,n){const a=e.modules.size,s=e.modules.data,l=i.getScale(a,n),f=Math.floor((a+n.margin*2)*l),m=n.margin*l,E=[n.color.light,n.color.dark];for(let g=0;g<f;g++)for(let h=0;h<f;h++){let R=(g*f+h)*4,I=n.color.light;if(g>=m&&h>=m&&g<f-m&&h<f-m){const _=Math.floor((g-m)/l),A=Math.floor((h-m)/l);I=E[s[_*a+A]?1:0]}t[R++]=I.r,t[R++]=I.g,t[R++]=I.b,t[R]=I.a}}}(Pe)),Pe}var ut;function Gt(){return ut||(ut=1,function(i){const r=ht();function o(e,n,a){e.clearRect(0,0,n.width,n.height),n.style||(n.style={}),n.height=a,n.width=a,n.style.height=a+"px",n.style.width=a+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(n,a,s){let l=s,f=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(f=t()),l=r.getOptions(l);const m=r.getImageWidth(n.modules.size,l),E=f.getContext("2d"),g=E.createImageData(m,m);return r.qrToImageData(g.data,n,l),o(E,f,m),E.putImageData(g,0,0),f},i.renderToDataURL=function(n,a,s){let l=s;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const f=i.render(n,a,l),m=l.type||"image/png",E=l.rendererOpts||{};return f.toDataURL(m,E.quality)}}(Ie)),Ie}var _e={},lt;function Wt(){if(lt)return _e;lt=1;const i=ht();function r(e,n){const a=e.a/255,s=n+'="'+e.hex+'"';return a<1?s+" "+n+'-opacity="'+a.toFixed(2).slice(1)+'"':s}function o(e,n,a){let s=e+n;return typeof a<"u"&&(s+=" "+a),s}function t(e,n,a){let s="",l=0,f=!1,m=0;for(let E=0;E<e.length;E++){const g=Math.floor(E%n),h=Math.floor(E/n);!g&&!f&&(f=!0),e[E]?(m++,E>0&&g>0&&e[E-1]||(s+=f?o("M",g+a,.5+h+a):o("m",l,0),l=0,f=!1),g+1<n&&e[E+1]||(s+=o("h",m),m=0)):l++}return s}return _e.render=function(n,a,s){const l=i.getOptions(a),f=n.modules.size,m=n.modules.data,E=f+l.margin*2,g=l.color.light.a?"<path "+r(l.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",h="<path "+r(l.color.dark,"stroke")+' d="'+t(m,f,l.margin)+'"/>',R='viewBox="0 0 '+E+" "+E+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+R+' shape-rendering="crispEdges">'+g+h+`</svg>
`;return typeof s=="function"&&s(null,_),_},_e}var ct;function Zt(){if(ct)return G;ct=1;const i=bt(),r=xt(),o=Gt(),t=Wt();function e(n,a,s,l,f){const m=[].slice.call(arguments,1),E=m.length,g=typeof m[E-1]=="function";if(!g&&!i())throw new Error("Callback required as last argument");if(g){if(E<2)throw new Error("Too few arguments provided");E===2?(f=s,s=a,a=l=void 0):E===3&&(a.getContext&&typeof f>"u"?(f=l,l=void 0):(f=l,l=s,s=a,a=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(s=a,a=l=void 0):E===2&&!a.getContext&&(l=s,s=a,a=void 0),new Promise(function(h,R){try{const I=r.create(s,l);h(n(I,a,l))}catch(I){R(I)}})}try{const h=r.create(s,l);f(null,n(h,a,l))}catch(h){f(h)}}return G.create=r.create,G.toCanvas=e.bind(null,o.render),G.toDataURL=e.bind(null,o.renderToDataURL),G.toString=e.bind(null,function(n,a,s){return t.render(n,s)}),G}var Xt=Zt();const en=yt(Xt),tn={key:0,class:"payment-container"},nn={class:"payment-header"},rn={class:"order-info"},on={class:"amount"},an={class:"price"},sn={key:0,class:"pickup-code-notice"},un={class:"payment-section"},ln={key:0,class:"payment-section"},cn={class:"qr-code-container"},dn={class:"qr-code"},fn={class:"qr-tips"},gn={class:"amount-tip"},hn={class:"price"},mn={class:"payment-status"},pn={key:1,class:"payment-footer"},yn={class:"payment-amount"},wn={class:"price"},vn={class:"payment-buttons"},Cn={key:2,class:"payment-countdown"},En={class:"countdown-info"},An={class:"countdown-time"},Bn={class:"expire-time"},Sn={key:3,class:"payment-expired"},Tn={class:"expired-content"},Nn={__name:"PaymentView",setup(i){const r=Ct(),o=F(null),t=F(Z.WECHAT),e=F(""),n=F(!1),a=F(!1),s=F(600),l=F(null),f=F(null);let m=null,E=null;const g=F(null),h=wt(()=>g.value),R=async c=>{try{return await en.toDataURL(c,{width:200,margin:2,color:{dark:"#000000",light:"#FFFFFF"}})}catch(u){return console.error("生成二维码失败:",u),null}},I=()=>{var u;const c={orderNo:((u=o.value)==null?void 0:u.orderNo)||g.value,paymentQrCode:e.value,paymentCreateTime:l.value,paymentExpireTime:f.value,selectedPayMethod:t.value};localStorage.setItem("payment_state",JSON.stringify(c))},_=()=>{const c=localStorage.getItem("payment_state");if(c&&o.value)try{const u=JSON.parse(c);if((u.orderNo===o.value.orderNo||u.orderNo===g.value)&&(e.value=u.paymentQrCode||"",l.value=u.paymentCreateTime?new Date(u.paymentCreateTime):null,f.value=u.paymentExpireTime?new Date(u.paymentExpireTime):null,t.value=u.selectedPayMethod||Z.WECHAT,f.value)){if(new Date<f.value)return console.log("恢复支付状态，继续倒计时"),M(),C(),!0;console.log("支付已过期，清除状态"),A()}}catch(u){console.error("恢复支付状态失败:",u)}return!1},A=()=>{localStorage.removeItem("payment_state"),e.value="",l.value=null,f.value=null,s.value=600},P=async()=>{var c;try{n.value=!0;let u={};g.value?u={orderNo:g.value,amount:o.value.totalAmount,businessType:"RESERVATION",payPlatform:t.value}:u={orderNo:o.value.orderNo,amount:o.value.amount,businessType:"MALL",payPlatform:t.value};const d=await It(u);if(d.data&&d.data.code===0){const w=d.data.data.codeUrl||d.data.data.qrCodeUrl;if(w){const b=await R(w);e.value=b||w,console.log("paymentQrCode:",e.value)}else{const b=`支付订单：${o.value.orderNo}，金额：¥${o.value.amount}`,D=await R(b);e.value=D||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg=="}l.value=new Date,f.value=new Date(l.value.getTime()+10*60*1e3),console.log("支付创建时间:",l.value),console.log("支付过期时间:",f.value),console.log("初始倒计时:",s.value),I(),L.success("支付创建成功，请在10分钟内完成支付"),M(),C()}else L.error(((c=d.data)==null?void 0:c.message)||"创建支付失败")}catch(u){console.error("创建支付失败:",u),L.error("创建支付失败，请重试")}finally{n.value=!1}},N=async()=>{try{a.value=!0;const c=await De(o.value.orderNo||g.value);if(c.data&&c.data.code===0){const u=c.data.data.status;u===qe.SUCCESS||u===1?(L.success("支付成功！"),v(),A(),h.value?r.push("/booking-history"):r.push(`/order-detail/${o.value.orderNo}`)):(console.log("支付状态不是已支付状态，当前状态:",u),L.info(`支付尚未完成，当前状态: ${u}，请继续支付`))}else console.error("支付状态查询失败:",c.data),L.error("查询支付状态失败")}catch(c){console.error("查询支付状态失败:",c),L.error("查询支付状态失败")}finally{a.value=!1}},B=()=>{Rt.confirm("确定要取消支付吗？","提示",{confirmButtonText:"确定",cancelButtonText:"继续支付",type:"warning"}).then(async()=>{try{const c=await ke(g.value||o.value.orderNo);c.data&&c.data.code===0?(v(),A(),localStorage.removeItem("payment_state"),localStorage.removeItem("payment_info"),L.success("订单已取消"),h.value?r.push("/booking-history"):r.push("/orders")):L.error("取消订单失败")}catch(c){console.error("取消订单失败:",c),L.error("取消订单失败")}}).catch(()=>{})},M=()=>{console.log("startCountdown 被调用"),console.log("paymentExpireTime.value:",f.value),m&&clearInterval(m);const c=new Date,u=Math.max(0,Math.floor((f.value-c)/1e3));s.value=u,console.log("初始倒计时值:",s.value),m=setInterval(()=>{const d=new Date,w=Math.max(0,Math.floor((f.value-d)/1e3));console.log("倒计时更新:",{now:d,expireTime:f.value,remainingTime:w,countdown:s.value}),s.value=w,s.value<=0&&(console.log("倒计时结束，自动取消订单"),v(),y())},1e3),console.log("倒计时定时器已启动")},y=async()=>{try{await ke(g.value||o.value.orderNo),L.warning("支付已过期，订单已自动取消"),A(),localStorage.removeItem("payment_state"),localStorage.removeItem("payment_info"),h.value&&r.push("/booking-history")}catch(c){console.error("自动取消订单失败:",c),L.error("支付过期处理失败")}},C=()=>{E=setInterval(async()=>{var c,u;try{const d=await De(o.value.orderNo||g.value);d.data&&d.data.code===0&&(d.data.data.status===qe.SUCCESS||d.data.data.status===1)?(console.log("自动检查发现支付成功！"),v(),A(),L.success("支付成功！"),h.value?r.push("/booking-history"):r.push(`/order-detail/${o.value.orderNo}`)):console.log("自动检查 - 支付仍未完成，状态:",(u=(c=d.data)==null?void 0:c.data)==null?void 0:u.status)}catch(d){console.error("自动检查支付状态失败:",d)}},3e3)},v=()=>{m&&(clearInterval(m),m=null),E&&(clearInterval(E),E=null)},p=c=>{const u=Math.floor(c/60),d=c%60;return`${u.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`},S=()=>{if(!f.value)return"";const c=f.value,u=c.getFullYear(),d=(c.getMonth()+1).toString().padStart(2,"0"),w=c.getDate().toString().padStart(2,"0"),b=c.getHours().toString().padStart(2,"0"),D=c.getMinutes().toString().padStart(2,"0");return`${u}-${d}-${w} ${b}:${D}`};return vt(()=>{var u;g.value=r.currentRoute.value.query.orderNo;let c;if(g.value)console.log("=== PaymentView 调试信息 ==="),console.log("reservationOrderNo:",g.value),console.log("history.state:",history.state),console.log("history.state.orderDetail:",history.state.orderDetail),console.log("history.state.booking:",history.state.booking),console.log("router.currentRoute.value:",r.currentRoute.value),console.log("window.history.state:",window.history.state),o.value=history.state.orderDetail||history.state.booking,console.log("paymentInfo:",o.value),_();else if(c=localStorage.getItem("payment_info"),c)try{o.value=JSON.parse(c),console.log("支付信息:",o.value),_()}catch(d){console.error("解析支付信息失败",d),L.error("获取支付信息失败");const w=c?JSON.parse(c):null;(u=w==null?void 0:w.orderNo)!=null&&u.startsWith("RO")?r.push("/booking-history"):r.push("/orders")}else L.warning("没有待支付的订单"),r.push("/orders")}),Et(()=>{v(),localStorage.removeItem("payment_info"),localStorage.removeItem("payment_state")}),(c,u)=>{const d=Nt,w=At,b=Bt,D=St,re=Tt;return o.value?(x(),j("div",tn,[T("div",nn,[u[4]||(u[4]=T("h2",null,"支付订单",-1)),T("div",rn,[T("span",null,"订单号："+V(o.value.orderNo||g.value),1),T("span",on,[u[2]||(u[2]=O("应付金额：")),T("span",an,"¥"+V(g.value?o.value.totalAmount.toFixed(2):o.value.amount.toFixed(2)),1)])]),h.value?Q("",!0):(x(),j("div",sn,u[3]||(u[3]=[T("i",{class:"el-icon-info"},null,-1),T("span",null,"支付成功后将显示取件码，请妥善保管",-1)])))]),T("div",un,[u[7]||(u[7]=T("h3",null,"选择支付方式",-1)),z(w,{modelValue:t.value,"onUpdate:modelValue":u[0]||(u[0]=W=>t.value=W),class:"payment-methods"},{default:H(()=>[z(d,{label:te(Z).WECHAT,class:"payment-method-item"},{default:H(()=>u[5]||(u[5]=[T("div",{class:"payment-method"},[T("div",{class:"payment-icon wechat-icon"},[T("img",{src:_t,alt:"微信支付",style:{width:"50px",height:"50px"}})]),T("div",{class:"payment-details"},[T("div",{class:"payment-name"},"微信支付"),T("div",{class:"payment-desc"},"使用微信扫码支付")])],-1)])),_:1},8,["label"]),z(d,{label:te(Z).ALIPAY,class:"payment-method-item"},{default:H(()=>u[6]||(u[6]=[T("div",{class:"payment-method"},[T("div",{class:"payment-icon alipay-icon"},[T("img",{src:Mt,alt:"支付宝",style:{width:"50px",height:"50px"}})]),T("div",{class:"payment-details"},[T("div",{class:"payment-name"},"支付宝"),T("div",{class:"payment-desc"},"推荐使用支付宝，安全快捷")])],-1)])),_:1},8,["label"])]),_:1},8,["modelValue"])]),e.value?(x(),j("div",ln,[u[11]||(u[11]=T("h3",null,"扫码支付",-1)),T("div",cn,[T("div",dn,[z(b,{src:e.value,fit:"contain",class:"qr-image"},{error:H(()=>u[8]||(u[8]=[T("div",{class:"qr-error"},[T("i",{class:"el-icon-picture-outline"}),T("p",null,"二维码加载失败")],-1)])),_:1},8,["src"])]),T("div",fn,[T("p",null,"请使用"+V(t.value===te(Z).ALIPAY?"支付宝":"微信")+"扫描二维码完成支付",1),T("p",gn,[u[9]||(u[9]=O("支付金额：")),T("span",hn,"¥"+V(g.value?o.value.totalAmount.toFixed(2):o.value.amount.toFixed(2)),1)])])]),T("div",mn,[z(D,{type:"primary",onClick:N,loading:a.value},{default:H(()=>[O(V(a.value?"检查支付状态中...":"我已完成支付"),1)]),_:1},8,["loading"]),z(D,{onClick:B},{default:H(()=>u[10]||(u[10]=[O("取消支付")])),_:1})])])):Q("",!0),e.value?Q("",!0):(x(),j("div",pn,[T("div",yn,[u[12]||(u[12]=T("span",null,"支付金额：",-1)),T("span",wn,"¥"+V(g.value?o.value.totalAmount.toFixed(2):o.value.amount.toFixed(2)),1)]),T("div",vn,[z(D,{type:"primary",size:"large",onClick:P,loading:n.value,disabled:!t.value},{default:H(()=>[O(V(n.value?"正在创建支付...":"立即支付"),1)]),_:1},8,["loading","disabled"])])])),e.value&&s.value>0?(x(),j("div",Cn,[T("div",En,[T("p",null,[u[13]||(u[13]=O("支付剩余时间：")),T("span",An,V(p(s.value)),1)]),T("p",Bn,"支付将于 "+V(S())+" 过期",1)]),z(re,{percentage:s.value/600*100,"show-text":!1,"stroke-width":8},null,8,["percentage"])])):Q("",!0),e.value&&s.value<=0?(x(),j("div",Sn,[T("div",Tn,[u[15]||(u[15]=T("i",{class:"el-icon-warning-outline"},null,-1)),u[16]||(u[16]=T("h3",null,"支付已过期",-1)),u[17]||(u[17]=T("p",null,"订单支付时间已超过10分钟，订单状态已更新为已过期",-1)),z(D,{type:"primary",onClick:u[1]||(u[1]=W=>te(r).push("/orders"))},{default:H(()=>u[14]||(u[14]=[O("返回订单列表")])),_:1})])])):Q("",!0)])):Q("",!0)}}},Un=Pt(Nn,[["__scopeId","data-v-68a7e98d"]]);export{Un as default};
