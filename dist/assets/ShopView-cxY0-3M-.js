import{r as F,o as M,q as C,l as n,j as s,w as i,H as Q,F as k,P as N,Q as z,G as Y,O as V,a1 as Z,i as u,f as I,B as w,K as L,d as X,L as ee,M as oe,p as B,ab as te,Z as ae,Y as se,ac as ne,R as re,s as j,ae as le,_ as ce,ah as ie,$ as de,a0 as ue,E as D,b as R,ai as pe,U as _e,a3 as me,aj as ge,a4 as ye,a7 as he,a as ve,g as fe,ak as Ce,I as $e}from"./index-CHTw6ThQ.js";/* empty css                *//* empty css               *//* empty css                     */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     */import{g as be,a as Ee,b as we}from"./shop-CQ1xGz2h.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                   *//* empty css                      *//* empty css                  *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                *//* empty css                     *//* empty css                  *//* empty css                         */const Fe={class:"category-list"},ke={class:"mobile-categories"},Se={class:"category-tags"},Ie={__name:"CategoryList",emits:["category-selected"],setup(x,{emit:$}){const p=F([]),y=F("all"),E=async()=>{const h=await be();p.value=h.data.data},r=h=>{y.value=h,m("category-selected",h)},m=$;return M(()=>{E()}),(h,c)=>{const v=Q,o=Y,t=Z;return u(),C("div",Fe,[c[3]||(c[3]=n("h2",null,"å•†å“åˆ†ç±»",-1)),s(o,{class:"category-menu desktop-menu","default-active":y.value,onSelect:r},{default:i(()=>[s(v,{index:"all"},{default:i(()=>c[1]||(c[1]=[k(" å…¨éƒ¨å•†å“ ")])),_:1}),(u(!0),C(N,null,z(p.value,a=>(u(),I(v,{key:a.id,index:a.id.toString()},{default:i(()=>[k(w(a.name),1)]),_:2},1032,["index"]))),128))]),_:1},8,["default-active"]),n("div",ke,[n("div",Se,[s(t,{class:V(["category-tag",{active:y.value==="all"}]),onClick:c[0]||(c[0]=a=>r("all")),effect:"plain"},{default:i(()=>c[2]||(c[2]=[k(" å…¨éƒ¨å•†å“ ")])),_:1},8,["class"]),(u(!0),C(N,null,z(p.value,a=>(u(),I(t,{key:a.id,class:V(["category-tag",{active:y.value===a.id.toString()}]),onClick:d=>r(a.id.toString()),effect:"plain"},{default:i(()=>[k(w(a.name),1)]),_:2},1032,["class","onClick"]))),128))])])])}}},T=A(Ie,[["__scopeId","data-v-030a4f76"]]),xe={class:"product-list"},Ne={class:"filter-panel"},ze={class:"filter-row"},Be={class:"button-row"},Ae={class:"product-grid"},De=["src"],Me={class:"product-info"},Pe={class:"product-name"},Ve={class:"product-subtitle"},Le={class:"product-price-row"},Te={class:"product-price"},Ue={class:"product-sales"},je={key:0,class:"pagination-container"},Re={__name:"ProductList",props:{categoryId:{type:[String,Number],default:"all"}},setup(x){const $=x,p=R(),y=F(!1),E=F([]),r=L({keyword:"",orderBy:"",pageNum:1,pageSize:8,categoryId:$.categoryId}),m=L({pageNum:1,pageSize:8,total:0}),h=X(()=>window.innerWidth<=768?"prev, pager, next":"total, sizes, prev, pager, next, jumper"),c=async()=>{y.value=!0;try{const e=await Ee(r);e.data.code===0?(E.value=e.data.data.list,m.pageNum=e.data.data.pageNum,m.pageSize=e.data.data.pageSize,m.total=e.data.data.total):D.error("èŽ·å–å•†å“åˆ—è¡¨å¤±è´¥")}catch(e){console.error("èŽ·å–å•†å“åˆ—è¡¨å¤±è´¥:",e),D.error("èŽ·å–å•†å“åˆ—è¡¨å¤±è´¥")}finally{y.value=!1}};ee(()=>$.categoryId,e=>{r.categoryId=e,r.pageNum=1,c()},{immediate:!0});const v=()=>{r.pageNum=1,c()},o=()=>{r.keyword="",r.orderBy="",r.pageNum=1,c()},t=e=>{r.pageSize=e,c()},a=e=>{r.pageNum=e,c()},d=e=>{p.push(`/product/${e}`)};return(e,l)=>{const _=se,b=ae,g=te,S=ne,P=j,K=le,O=_e,W=pe,q=ie,G=de,H=ue,J=ce;return u(),C("div",xe,[n("div",Ne,[s(K,{inline:!0,class:"filter-form"},{default:i(()=>[n("div",ze,[s(g,{label:"æŽ’åºæ–¹å¼",class:"sort-item"},{default:i(()=>[s(b,{modelValue:r.orderBy,"onUpdate:modelValue":l[0]||(l[0]=f=>r.orderBy=f),placeholder:"è¯·é€‰æ‹©"},{default:i(()=>[s(_,{label:"é»˜è®¤æŽ’åº",value:""}),s(_,{label:"ä»·æ ¼å‡åº",value:"price_asc"}),s(_,{label:"ä»·æ ¼é™åº",value:"price_desc"}),s(_,{label:"é”€é‡é™åº",value:"sales_desc"})]),_:1},8,["modelValue"])]),_:1}),s(g,{label:"å…³é”®è¯",class:"search-item"},{default:i(()=>[s(S,{modelValue:r.keyword,"onUpdate:modelValue":l[1]||(l[1]=f=>r.keyword=f),placeholder:"è¯·è¾“å…¥å…³é”®è¯",onKeyup:re(v,["enter"])},null,8,["modelValue"])]),_:1})]),n("div",Be,[s(g,null,{default:i(()=>[s(P,{type:"primary",onClick:v},{default:i(()=>l[2]||(l[2]=[k("æœç´¢")])),_:1}),s(P,{onClick:o},{default:i(()=>l[3]||(l[3]=[k("é‡ç½®")])),_:1})]),_:1})])]),_:1})]),oe((u(),C("div",Ae,[s(q,{gutter:20},{default:i(()=>[(u(!0),C(N,null,z(E.value,f=>(u(),I(W,{xs:12,sm:12,md:8,lg:6,key:f.id},{default:i(()=>[s(O,{class:"product-card",onClick:ao=>d(f.id)},{default:i(()=>[n("img",{src:f.mainImage,class:"product-image"},null,8,De),n("div",Me,[n("h3",Pe,w(f.name),1),n("p",Ve,w(f.subtitle),1),n("div",Le,[n("span",Te,"Â¥"+w(f.price.toFixed(2)),1),n("span",Ue,"é”€é‡: "+w(f.sales),1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),E.value.length===0&&!y.value?(u(),I(G,{key:0,description:"æš‚æ— å•†å“"})):B("",!0)])),[[J,y.value]]),m.total>0?(u(),C("div",je,[s(H,{background:"",onSizeChange:t,onCurrentChange:a,"current-page":m.pageNum,"page-sizes":[8,4,6,10,12],"page-size":m.pageSize,layout:h.value,total:m.total},null,8,["current-page","page-size","layout","total"])])):B("",!0)])}}},U=A(Re,[["__scopeId","data-v-e932d64b"]]),Ke={class:"product-carousel"},Oe={class:"content-left"},We={class:"carousel-title"},qe={class:"carousel-subtitle"},Ge={class:"content-right"},He=["src","alt"],Je={__name:"ProductCarousel",setup(x){const $=R(),p=F([]),y=o=>{$.push(`/product/${o}`)},E=async()=>{try{const o=await we();o.data.code===0?p.value=o.data.data:D.error(o.data.msg)}catch(o){console.error("èŽ·å–è½®æ’­å›¾æ•°æ®å¤±è´¥",o)}};F([]);const r=[{primary:"#FF6B6B",secondary:"#4ECDC4"},{primary:"#845EC2",secondary:"#FF8066"},{primary:"#FFD93D",secondary:"#6BCF7F"},{primary:"#FF8E9B",secondary:"#C7CEEA"},{primary:"#A8E6CF",secondary:"#FFEAA7"},{primary:"#74B9FF",secondary:"#FD79A8"},{primary:"#FDCB6E",secondary:"#6C5CE7"},{primary:"#55A3FF",secondary:"#FEA47F"},{primary:"#26DE81",secondary:"#FC7C7C"},{primary:"#A29BFE",secondary:"#FDA085"}],m=o=>{let t=0;for(let a=0;a<o.length;a++){const d=o.charCodeAt(a);t=(t<<5)-t+d,t=t&t}return Math.abs(t)%r.length},h=async()=>{console.log("ðŸŽ¨ å¼€å§‹è®¾ç½®ä¸»é¢˜è‰²ï¼Œä½¿ç”¨é¢„è®¾é¢œè‰²æ–¹æ¡ˆ"),console.log("è½®æ’­å›¾æ•°æ®:",p.value);try{p.value.forEach((o,t)=>{const a=m(o.productName+o.productId),d=r[a],e=`linear-gradient(135deg, ${d.primary}CC, ${d.secondary}AA)`;o.bgColor=e,console.log(`ðŸŽ¨ å•†å“"${o.productName}"åº”ç”¨é¢œè‰²æ–¹æ¡ˆ${a+1}: ${d.primary} â†’ ${d.secondary}`),console.log(`   æ¸å˜æ•ˆæžœ: ${e}`)}),console.log("ðŸŽ‰ æ‰€æœ‰ä¸»é¢˜è‰²è®¾ç½®å®Œæˆ")}catch(o){console.error("âŒ è®¾ç½®ä¸»é¢˜è‰²å¤±è´¥:",o)}},c=async()=>{console.log("ðŸŒ é€šè¿‡åŽç«¯ä»£ç†èŽ·å–ä¸»é¢˜è‰²"),console.log("å›¾ç‰‡åˆ—è¡¨:",p.value.map(o=>({name:o.productName,url:o.mainImage})));try{const o=p.value.map(async(e,l)=>{try{console.log(`ðŸ“¡ å¼€å§‹è¯·æ±‚å›¾ç‰‡${l+1}: ${e.productName}`),console.log(`   å›¾ç‰‡URL: ${e.mainImage}`);const _=await ge.post("/api/image/extract-color",{imageUrl:e.mainImage});if(console.log(`ðŸ“¡ å›¾ç‰‡${l+1}å“åº”:`,_.data),_.data.code===0){const b=_.data.data.color,g=_.data.data.source,S=`linear-gradient(135deg, ${b}CC, ${v(b,-30)}DD)`;return e.bgColor=S,e.colorSource=g==="oss"?"é˜¿é‡Œäº‘OSS":g==="java"?"Javaå¤„ç†":g,console.log(`âœ… é€šè¿‡${g}èŽ·å–åˆ°å›¾ç‰‡${l+1}çš„ä¸»é¢˜è‰²: ${b}`),console.log(`   æ¸å˜æ•ˆæžœ: ${S}`),{color:b,source:g,success:!0}}else throw new Error(_.data.msg||"åŽç«¯è¿”å›žé”™è¯¯")}catch(_){console.error(`âŒ å›¾ç‰‡${l+1}(${e.productName})é¢œè‰²èŽ·å–å¤±è´¥:`,_.message);const b=m(e.productName+e.productId),g=r[b],S=`linear-gradient(135deg, ${g.primary}CC, ${g.secondary}AA)`;return e.bgColor=S,e.colorSource="é¢„è®¾æ–¹æ¡ˆ",console.log(`ðŸ”„ å›¾ç‰‡${l+1}å›žé€€åˆ°é¢„è®¾é¢œè‰²æ–¹æ¡ˆ${b+1}: ${g.primary} â†’ ${g.secondary}`),{color:g.primary,source:"fallback",success:!1,error:_.message}}}),t=await Promise.all(o),a=t.filter(e=>e.success).length,d=t.filter(e=>!e.success).length;console.log("ðŸŽ‰ ä»£ç†æ–¹å¼ä¸»é¢˜è‰²èŽ·å–å®Œæˆ!"),console.log(`   æˆåŠŸ: ${a}/${t.length}`),console.log(`   å›žé€€: ${d}/${t.length}`),console.log("   è¯¦ç»†ç»“æžœ:",t),a===0&&console.warn("âš ï¸ æ‰€æœ‰å›¾ç‰‡éƒ½èŽ·å–é¢œè‰²å¤±è´¥ï¼Œå¯èƒ½éœ€è¦æ£€æŸ¥åŽç«¯æœåŠ¡")}catch(o){console.error("âŒ ä»£ç†æ–¹å¼èŽ·å–ä¸»é¢˜è‰²å®Œå…¨å¤±è´¥:",o),console.log("ðŸ”„ å®Œå…¨å›žé€€åˆ°é¢„è®¾æ–¹æ¡ˆ"),await h()}},v=(o,t)=>{const a=o.replace("#",""),d=parseInt(a,16),e=Math.max(0,Math.min(255,(d>>16)+t)),l=Math.max(0,Math.min(255,(d>>8&255)+t)),_=Math.max(0,Math.min(255,(d&255)+t));return"#"+((1<<24)+(e<<16)+(l<<8)+_).toString(16).slice(1)};return M(async()=>{await E(),console.log("ðŸ“¦ è½®æ’­å›¾æ•°æ®åŠ è½½å®Œæˆï¼Œå¼€å§‹èŽ·å–çœŸå®žå›¾ç‰‡é¢œè‰²"),await c()}),(o,t)=>{const a=j,d=ye,e=me;return u(),C("div",Ke,[s(e,{interval:4e3,type:"card",height:"280px","indicator-position":"outside",arrow:"never",class:"carousel-container"},{default:i(()=>[(u(!0),C(N,null,z(p.value,l=>(u(),I(d,{key:l.productId,class:"carousel-item"},{default:i(()=>[n("div",{class:"carousel-content",style:he({background:l.bgColor||"linear-gradient(135deg, #6366f1AA, #4f46e5DD)"})},[n("div",Oe,[n("h3",We,w(l.productName),1),n("p",qe,w(l.subtitle),1),s(a,{type:"primary",size:"large",class:"carousel-button",onClick:_=>y(l.productId)},{default:i(()=>t[0]||(t[0]=[k(" ç«‹å³è´­ä¹° ")])),_:2},1032,["onClick"])]),n("div",Ge,[n("img",{src:l.mainImage,alt:l.productName,class:"carousel-image"},null,8,He)])],4)]),_:2},1024))),128))]),_:1})])}}},Qe=A(Je,[["__scopeId","data-v-805635c4"]]),Ye={class:"shop-container"},Ze={class:"category-section"},Xe={key:1,class:"mobile-layout"},eo={class:"mobile-category"},oo={class:"mobile-products"},to={__name:"ShopView",setup(x){const $=F("all"),p=F(!1),y=()=>{p.value=window.innerWidth<=768},r=((h,c)=>{let v;return function(...t){const a=()=>{clearTimeout(v),h(...t)};clearTimeout(v),v=setTimeout(a,c)}})(y,150),m=h=>{$.value=h};return M(()=>{y(),window.addEventListener("resize",r)}),ve(()=>{window.removeEventListener("resize",r)}),(h,c)=>{const v=Ce,o=$e,t=fe;return u(),C("div",Ye,[c[0]||(c[0]=n("div",{class:"page-header"},[n("h1",{class:"page-title"},"ç¾½ä½“å•†åŸŽ"),n("p",{class:"page-subtitle"},"ä¸“ä¸šç¾½æ¯›çƒè£…å¤‡ï¼ŒåŠ©åŠ›ä½ çš„è¿åŠ¨è¡¨çŽ°")],-1)),s(Qe),p.value?B("",!0):(u(),I(t,{key:0,class:"desktop-layout"},{default:i(()=>[s(v,{width:"240px",class:"sidebar"},{default:i(()=>[n("div",Ze,[s(T,{onCategorySelected:m})])]),_:1}),s(o,{class:"main-content"},{default:i(()=>[s(U,{categoryId:$.value},null,8,["categoryId"])]),_:1})]),_:1})),p.value?(u(),C("div",Xe,[n("div",eo,[s(T,{onCategorySelected:m})]),n("div",oo,[s(U,{categoryId:$.value},null,8,["categoryId"])])])):B("",!0)])}}},Eo=A(to,[["__scopeId","data-v-973c1984"]]);export{Eo as default};
