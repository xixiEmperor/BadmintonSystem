# ç¾½æ¯›çƒç³»ç»Ÿæ•°æ®åˆ†æåŠŸèƒ½è¯´æ˜

## åŠŸèƒ½æ¦‚è¿°

ç¾½æ¯›çƒç³»ç»Ÿæ•°æ®åˆ†ææ¨¡å—ä¸ºç®¡ç†å‘˜æä¾›å…¨é¢çš„æ•°æ®ç»Ÿè®¡å’Œå¯è§†åŒ–å›¾è¡¨åŠŸèƒ½ï¼Œæ”¯æŒå¤šç»´åº¦æ•°æ®å±•ç¤ºï¼ŒåŸºäºEChartså›¾è¡¨åº“å®ç°ã€‚

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ analytics.js          # æ•°æ®åˆ†æAPIæ¥å£
â”œâ”€â”€ components/
â”‚   â””â”€â”€ ChartCard.vue         # é€šç”¨å›¾è¡¨å¡ç‰‡ç»„ä»¶
â”œâ”€â”€ views/
â”‚   â””â”€â”€ admin/
â”‚       â””â”€â”€ DashBoard.vue     # åå°é¦–é¡µ(æ•°æ®åˆ†æä¸»é¡µé¢)
â””â”€â”€ docs/
    â””â”€â”€ api/
        â””â”€â”€ åå°æ•°æ®ç»Ÿè®¡æ¥å£æ–‡æ¡£.md  # APIæ¥å£æ–‡æ¡£
```

## ä¸»è¦åŠŸèƒ½

### 1. ä»ªè¡¨æ¿æ¦‚è§ˆ
- ç”¨æˆ·æ€»æ•°åŠä»Šæ—¥æ–°å¢
- é¢„çº¦æ€»æ•°åŠä»Šæ—¥é¢„çº¦
- æ€»æ”¶å…¥åŠä»Šæ—¥æ”¶å…¥
- å•†åŸè®¢å•åŠä»Šæ—¥è®¢å•
- ç¾è§‚çš„å¡ç‰‡å¼å±•ç¤ºï¼Œå¸¦æœ‰æ¸å˜è‰²å›¾æ ‡

### 2. æ•°æ®å›¾è¡¨
- **ç”¨æˆ·æ³¨å†Œè¶‹åŠ¿** - æŠ˜çº¿å›¾æ˜¾ç¤º30å¤©ç”¨æˆ·æ³¨å†Œå˜åŒ–
- **ç”¨æˆ·è§’è‰²åˆ†å¸ƒ** - é¥¼å›¾æ˜¾ç¤ºä¸åŒè§’è‰²ç”¨æˆ·å æ¯”
- **é¢„çº¦è¶‹åŠ¿** - æŠ˜çº¿å›¾æ˜¾ç¤ºåœºåœ°é¢„çº¦å˜åŒ–è¶‹åŠ¿
- **åœºåœ°ä½¿ç”¨ç‡æ’è¡Œ** - æŸ±çŠ¶å›¾æ˜¾ç¤ºå„åœºåœ°ä½¿ç”¨æƒ…å†µ
- **æ”¶å…¥è¶‹åŠ¿** - æŠ˜çº¿å›¾æ˜¾ç¤ºæ”¶å…¥å˜åŒ–è¶‹åŠ¿
- **å•†åŸè®¢å•è¶‹åŠ¿** - æŠ˜çº¿å›¾æ˜¾ç¤ºå•†åŸè®¢å•å˜åŒ–
- **çƒ­é—¨å•†å“æ’è¡Œ** - æŸ±çŠ¶å›¾æ˜¾ç¤ºå•†å“é”€é‡æ’è¡Œ
- **å‘å¸–è¶‹åŠ¿** - æŠ˜çº¿å›¾æ˜¾ç¤ºè®ºå›å‘å¸–æ´»è·ƒåº¦

### 3. å“åº”å¼è®¾è®¡
- æ”¯æŒä¸åŒå±å¹•å°ºå¯¸è‡ªé€‚åº”
- å›¾è¡¨è‡ªåŠ¨è°ƒæ•´å¤§å°
- ç§»åŠ¨ç«¯å‹å¥½çš„å¸ƒå±€

## æŠ€æœ¯å®ç°

### APIæ¥å£
æ‰€æœ‰æ•°æ®åˆ†ææ¥å£éƒ½åœ¨ `src/api/analytics.js` ä¸­å®šä¹‰ï¼Œç›´æ¥è°ƒç”¨åç«¯APIï¼š

```javascript
// è·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®
getDashboardOverview()

// è·å–å„ç§å›¾è¡¨æ•°æ®
getUserRegistrationTrend()
getUserRoleDistribution()
getReservationTrend()
// ... æ›´å¤šæ¥å£
```

### å›¾è¡¨ç»„ä»¶
ä½¿ç”¨ `ChartCard.vue` é€šç”¨ç»„ä»¶å°è£…EChartså›¾è¡¨ï¼š

```vue
<ChartCard
  chart-id="userTrendChart"
  title="ç”¨æˆ·æ³¨å†Œè¶‹åŠ¿"
  :option="chartOption"
  :loading="loading"
/>
```

## ä½¿ç”¨è¯´æ˜

### 1. è®¿é—®æ•°æ®åˆ†æé¡µé¢
- ä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•ç³»ç»Ÿ
- è¿›å…¥åå°ç®¡ç†
- é¦–é¡µå³ä¸ºæ•°æ®åˆ†æä»ªè¡¨æ¿

### 2. æŸ¥çœ‹ç»Ÿè®¡æ•°æ®
- é¡µé¢é¡¶éƒ¨æ˜¾ç¤ºå…³é”®æŒ‡æ ‡æ¦‚è§ˆ
- ä¸‹æ–¹å±•ç¤ºå„ç±»æ•°æ®å›¾è¡¨
- å›¾è¡¨æ”¯æŒäº¤äº’æ“ä½œï¼ˆæ‚¬åœæŸ¥çœ‹è¯¦æƒ…ç­‰ï¼‰

### 3. æ•°æ®åˆ·æ–°
- é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è·å–æœ€æ–°æ•°æ®
- æ”¯æŒæ‰‹åŠ¨åˆ·æ–°é¡µé¢æ›´æ–°æ•°æ®
- å›¾è¡¨æ•°æ®å®æ—¶å“åº”çª—å£å¤§å°å˜åŒ–

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„å›¾è¡¨
1. åœ¨ `src/api/analytics.js` ä¸­æ·»åŠ æ–°çš„APIæ¥å£
2. åœ¨ `DashBoard.vue` ä¸­æ·»åŠ å›¾è¡¨åˆå§‹åŒ–é€»è¾‘
3. åœ¨æ¨¡æ¿ä¸­æ·»åŠ å›¾è¡¨å®¹å™¨

### è‡ªå®šä¹‰å›¾è¡¨æ ·å¼
ä¿®æ”¹ `DashBoard.vue` ä¸­çš„EChartsé…ç½®ï¼š

```javascript
const option = {
  title: { text: 'å›¾è¡¨æ ‡é¢˜' },
  tooltip: { trigger: 'axis' },
  xAxis: { type: 'category', data: labels },
  yAxis: { type: 'value' },
  series: [{
    data: chartData,
    type: 'line',
    itemStyle: { color: '#409eff' }
  }]
}
```

## APIæ¥å£è§„èŒƒ

### è¯·æ±‚æ ¼å¼
æ‰€æœ‰æ¥å£éƒ½éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œè¯·æ±‚å¤´éœ€åŒ…å«æœ‰æ•ˆçš„JWT Tokenï¼š

```javascript
headers: {
  'Authorization': 'Bearer <token>'
}
```

### å“åº”æ ¼å¼
ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼ˆæ‰€æœ‰å“åº”éƒ½åŒ…è£¹åœ¨ä¸€å±‚dataä¸­ï¼‰ï¼š

```json
{
  "data": {
    "code": 0,
    "msg": "è·å–æˆåŠŸ",
    "data": {
      // å…·ä½“æ•°æ®å†…å®¹
    }
  }
}
```

### å›¾è¡¨æ•°æ®æ ¼å¼
å›¾è¡¨æ¥å£è¿”å›çš„æ•°æ®æ ¼å¼ï¼š

```json
{
  "data": {
    "code": 0,
    "msg": "è·å–æˆåŠŸ",
    "data": {
      "title": "å›¾è¡¨æ ‡é¢˜",
      "type": "line|bar|pie",
      "labels": ["æ ‡ç­¾1", "æ ‡ç­¾2"],
      "data": [æ•°å€¼1, æ•°å€¼2]
    }
  }
}
```

### ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®æ ¼å¼
ä»ªè¡¨æ¿æ¦‚è§ˆæ¥å£è¿”å›çš„æ•°æ®æ ¼å¼ï¼š

```json
{
  "data": {
    "code": 0,
    "msg": "è·å–æˆåŠŸ",
    "data": {
      "totalUsers": 1000,
      "newUsersToday": 5,
      "newUsersThisMonth": 150,
      "activeUsersToday": 200,
      "totalReservations": 500,
      "reservationsToday": 10,
      "reservationsThisMonth": 200,
      "reservationRevenue": 50000,
      "revenueToday": 1000,
      "revenueThisMonth": 25000,
      "totalOrders": 300,
      "ordersToday": 8,
      "ordersThisMonth": 120,
      "mallRevenue": 30000,
      "mallRevenueToday": 800,
      "mallRevenueThisMonth": 15000,
      "totalPosts": 800,
      "postsToday": 15,
      "totalReplies": 2000,
      "repliesToday": 50,
      "totalVenues": 20,
      "availableVenues": 18,
      "venueUtilizationRate": 85.5
    }
  }
}
```

### é¥¼å›¾æ•°æ®æ ¼å¼
å¯¹äºé¥¼å›¾ï¼ˆå¦‚ç”¨æˆ·è§’è‰²åˆ†å¸ƒï¼‰ï¼Œdataå­—æ®µæ ¼å¼ä¸ºï¼š

```json
{
  "data": {
    "code": 0,
    "msg": "è·å–æˆåŠŸ",
    "data": {
      "title": "ç”¨æˆ·è§’è‰²åˆ†å¸ƒ",
      "type": "pie",
      "data": [
        {"name": "æ™®é€šç”¨æˆ·", "value": 800},
        {"name": "VIPç”¨æˆ·", "value": 150},
        {"name": "ç®¡ç†å‘˜", "value": 50}
      ]
    }
  }
}
```

### æ•°æ®è®¿é—®è¯´æ˜
åœ¨å‰ç«¯ä»£ç ä¸­ï¼Œéœ€è¦é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¿é—®æ•°æ®ï¼š

```javascript
// æ£€æŸ¥å“åº”çŠ¶æ€
if (response.data.code === 0) {
  // è®¿é—®å®é™…æ•°æ®
  const chartData = response.data.data
  const title = chartData.title
  const labels = chartData.labels
  const data = chartData.data
}
```

## åç«¯APIæ¥å£åˆ—è¡¨

### ä»ªè¡¨æ¿æ¦‚è§ˆ
- `GET /api/analytics/dashboard` - è·å–ä»ªè¡¨æ¿æ¦‚è§ˆæ•°æ®

### ç”¨æˆ·ç›¸å…³
- `GET /api/analytics/charts/user-registration-trend` - ç”¨æˆ·æ³¨å†Œè¶‹åŠ¿
- `GET /api/analytics/charts/user-role-distribution` - ç”¨æˆ·è§’è‰²åˆ†å¸ƒ

### é¢„çº¦ç›¸å…³
- `GET /api/analytics/charts/reservation-trend` - é¢„çº¦è¶‹åŠ¿
- `GET /api/analytics/charts/venue-usage-ranking` - åœºåœ°ä½¿ç”¨ç‡æ’è¡Œ
- `GET /api/analytics/charts/reservation-status-distribution` - é¢„çº¦çŠ¶æ€åˆ†å¸ƒ
- `GET /api/analytics/charts/hourly-reservation-distribution` - æ¯å°æ—¶é¢„çº¦åˆ†å¸ƒ

### æ”¶å…¥ç›¸å…³
- `GET /api/analytics/charts/revenue-trend` - æ”¶å…¥è¶‹åŠ¿

### å•†åŸç›¸å…³
- `GET /api/analytics/charts/mall-order-trend` - å•†åŸè®¢å•è¶‹åŠ¿
- `GET /api/analytics/charts/popular-products` - çƒ­é—¨å•†å“æ’è¡Œ
- `GET /api/analytics/charts/mall-order-status-distribution` - å•†åŸè®¢å•çŠ¶æ€åˆ†å¸ƒ

### è®ºå›ç›¸å…³
- `GET /api/analytics/charts/post-trend` - å‘å¸–è¶‹åŠ¿
- `GET /api/analytics/charts/post-category-distribution` - å¸–å­åˆ†ç±»åˆ†å¸ƒ
- `GET /api/analytics/charts/most-active-users` - æœ€æ´»è·ƒç”¨æˆ·æ’è¡Œ

## æ€§èƒ½ä¼˜åŒ–

### å‰ç«¯ä¼˜åŒ–
- å›¾è¡¨æ‡’åŠ è½½ï¼ŒæŒ‰éœ€åˆå§‹åŒ–
- æ•°æ®ç¼“å­˜ï¼Œé¿å…é‡å¤è¯·æ±‚
- é˜²æŠ–å¤„ç†çª—å£resizeäº‹ä»¶
- ç»„ä»¶é”€æ¯æ—¶æ¸…ç†å›¾è¡¨å®ä¾‹

### åç«¯ä¼˜åŒ–å»ºè®®
- æ•°æ®æŸ¥è¯¢ä¼˜åŒ–ï¼Œæ·»åŠ ç´¢å¼•
- ç»“æœç¼“å­˜ï¼Œå‡å°‘æ•°æ®åº“å‹åŠ›
- åˆ†é¡µå¤„ç†å¤§æ•°æ®é‡
- å¼‚æ­¥å¤„ç†å¤æ‚ç»Ÿè®¡

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **å›¾è¡¨ä¸æ˜¾ç¤º**: æ£€æŸ¥å®¹å™¨DOMæ˜¯å¦å­˜åœ¨ï¼Œæ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
2. **æ•°æ®åŠ è½½å¤±è´¥**: æ£€æŸ¥APIæ¥å£æ˜¯å¦æ­£å¸¸ï¼Œæƒé™æ˜¯å¦è¶³å¤Ÿ
3. **å›¾è¡¨å˜å½¢**: æ£€æŸ¥å®¹å™¨å°ºå¯¸ï¼Œè°ƒç”¨resizeæ–¹æ³•
4. **å†…å­˜æ³„æ¼**: ç¡®ä¿ç»„ä»¶é”€æ¯æ—¶disposeå›¾è¡¨å®ä¾‹
5. **APIè°ƒç”¨å¤±è´¥**: æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œæ¥å£æ˜¯å¦å®ç°

### è°ƒè¯•æ–¹æ³•
- å¼€å¯æµè§ˆå™¨å¼€å‘è€…å·¥å…·
- æŸ¥çœ‹Networké¢æ¿æ£€æŸ¥APIè¯·æ±‚
- æŸ¥çœ‹Consoleé¢æ¿æ£€æŸ¥é”™è¯¯ä¿¡æ¯
- ä½¿ç”¨Vue DevToolsæ£€æŸ¥ç»„ä»¶çŠ¶æ€

## æ‰©å±•åŠŸèƒ½

### è®¡åˆ’ä¸­çš„åŠŸèƒ½
- [ ] æ•°æ®å¯¼å‡ºåŠŸèƒ½ï¼ˆExcel/PDFï¼‰
- [ ] è‡ªå®šä¹‰æ—¶é—´èŒƒå›´ç­›é€‰
- [ ] å®æ—¶æ•°æ®æ¨é€
- [ ] æ›´å¤šå›¾è¡¨ç±»å‹æ”¯æŒ
- [ ] æ•°æ®å¯¹æ¯”åŠŸèƒ½
- [ ] ç§»åŠ¨ç«¯ä¸“ç”¨å›¾è¡¨

### è´¡çŒ®æŒ‡å—
1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å˜æ›´
4. åˆ›å»ºPull Request
5. ç­‰å¾…ä»£ç å®¡æŸ¥

## æ›´æ–°æ—¥å¿—

### v1.1.0 (2024-01-XX)
- ğŸ”§ ç§»é™¤æ¨¡æ‹Ÿæ•°æ®æ”¯æŒï¼Œå®Œå…¨ä½¿ç”¨åç«¯API
- ğŸ“ æ›´æ–°APIæ¥å£æ–‡æ¡£
- ğŸ› ä¿®å¤ç›¸å…³ä¾èµ–é—®é¢˜

### v1.0.0 (2024-01-XX)
- âœ¨ æ–°å¢æ•°æ®åˆ†ææ¨¡å—
- âœ¨ å®ç°ä»ªè¡¨æ¿æ¦‚è§ˆåŠŸèƒ½
- âœ¨ æ·»åŠ 8ç§æ•°æ®å›¾è¡¨
- âœ¨ å“åº”å¼è®¾è®¡é€‚é…

---

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿæˆ–æäº¤Issueã€‚ 